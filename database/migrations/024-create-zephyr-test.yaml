databaseChangeLog:
  - changeSet:
      id: 024-create-zephyr-test-tables
      author: system
      changes:
        # Zephyr Scale - Test Management for Jira

        # Test Cases
        - createTable:
            tableName: ao_4d28dd_test_case
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: test_key
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: project_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(500)
                  constraints:
                    nullable: false
              - column:
                  name: objective
                  type: TEXT
              - column:
                  name: precondition
                  type: TEXT
              - column:
                  name: priority
                  type: VARCHAR(50)
              - column:
                  name: status
                  type: VARCHAR(50)
              - column:
                  name: owner
                  type: VARCHAR(255)
              - column:
                  name: estimated_time
                  type: INTEGER
              - column:
                  name: created_by
                  type: VARCHAR(255)
              - column:
                  name: created_date
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
              - column:
                  name: updated_date
                  type: TIMESTAMP

        # Test Steps
        - createTable:
            tableName: ao_4d28dd_test_step
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: test_case_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: step_number
                  type: INTEGER
                  constraints:
                    nullable: false
              - column:
                  name: description
                  type: TEXT
              - column:
                  name: test_data
                  type: TEXT
              - column:
                  name: expected_result
                  type: TEXT
              - column:
                  name: step_type
                  type: VARCHAR(50)

        # Test Cycles
        - createTable:
            tableName: ao_4d28dd_test_cycle
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: cycle_name
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: project_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: version_id
                  type: BIGINT
              - column:
                  name: folder_id
                  type: BIGINT
              - column:
                  name: build
                  type: VARCHAR(255)
              - column:
                  name: environment
                  type: VARCHAR(255)
              - column:
                  name: description
                  type: TEXT
              - column:
                  name: start_date
                  type: DATE
              - column:
                  name: end_date
                  type: DATE
              - column:
                  name: status
                  type: VARCHAR(50)
              - column:
                  name: created_by
                  type: VARCHAR(255)
              - column:
                  name: created_date
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP

        # Test Executions
        - createTable:
            tableName: ao_4d28dd_test_execution
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: execution_key
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: test_case_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: cycle_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: issue_id
                  type: BIGINT
              - column:
                  name: executed_by
                  type: VARCHAR(255)
              - column:
                  name: execution_date
                  type: TIMESTAMP
              - column:
                  name: execution_time
                  type: INTEGER
              - column:
                  name: status
                  type: VARCHAR(50)
                  constraints:
                    nullable: false
              - column:
                  name: comment
                  type: TEXT
              - column:
                  name: assigned_to
                  type: VARCHAR(255)

        # Test Step Results
        - createTable:
            tableName: ao_4d28dd_step_result
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: execution_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: step_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: status
                  type: VARCHAR(50)
                  constraints:
                    nullable: false
              - column:
                  name: actual_result
                  type: TEXT
              - column:
                  name: comment
                  type: TEXT
              - column:
                  name: execution_date
                  type: TIMESTAMP

        # Test Folders
        - createTable:
            tableName: ao_4d28dd_test_folder
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: folder_name
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: project_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: parent_folder_id
                  type: BIGINT
              - column:
                  name: description
                  type: TEXT
              - column:
                  name: folder_type
                  type: VARCHAR(50)
              - column:
                  name: created_by
                  type: VARCHAR(255)
              - column:
                  name: created_date
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP

        # Test Plans
        - createTable:
            tableName: ao_4d28dd_test_plan
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: plan_name
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: project_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: description
                  type: TEXT
              - column:
                  name: objective
                  type: TEXT
              - column:
                  name: owner
                  type: VARCHAR(255)
              - column:
                  name: status
                  type: VARCHAR(50)
              - column:
                  name: created_by
                  type: VARCHAR(255)
              - column:
                  name: created_date
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP

        # Test Plan Cycles
        - createTable:
            tableName: ao_4d28dd_plan_cycle
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: plan_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: cycle_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: order_num
                  type: INTEGER

        # Test Attachments
        - createTable:
            tableName: ao_4d28dd_test_attachment
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: entity_type
                  type: VARCHAR(100)
                  constraints:
                    nullable: false
              - column:
                  name: entity_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: file_name
                  type: VARCHAR(500)
              - column:
                  name: file_size
                  type: BIGINT
              - column:
                  name: mime_type
                  type: VARCHAR(255)
              - column:
                  name: uploaded_by
                  type: VARCHAR(255)
              - column:
                  name: uploaded_date
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP

        # Test Defects
        - createTable:
            tableName: ao_4d28dd_test_defect
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: execution_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: issue_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: step_id
                  type: BIGINT
              - column:
                  name: created_date
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP

        # Test Metrics
        - createTable:
            tableName: ao_4d28dd_test_metric
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: metric_date
                  type: DATE
                  constraints:
                    nullable: false
              - column:
                  name: project_id
                  type: BIGINT
              - column:
                  name: cycle_id
                  type: BIGINT
              - column:
                  name: total_tests
                  type: INTEGER
              - column:
                  name: passed
                  type: INTEGER
              - column:
                  name: failed
                  type: INTEGER
              - column:
                  name: blocked
                  type: INTEGER
              - column:
                  name: wip
                  type: INTEGER
              - column:
                  name: unexecuted
                  type: INTEGER

        # Test Requirements
        - createTable:
            tableName: ao_4d28dd_requirement
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: requirement_key
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: project_id
                  type: BIGINT
              - column:
                  name: issue_id
                  type: BIGINT
              - column:
                  name: name
                  type: VARCHAR(500)
              - column:
                  name: description
                  type: TEXT

        # Test Coverage
        - createTable:
            tableName: ao_4d28dd_test_coverage
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: test_case_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: requirement_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: coverage_type
                  type: VARCHAR(50)

        # Test Parameters
        - createTable:
            tableName: ao_4d28dd_test_parameter
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: test_case_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: parameter_name
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: parameter_values
                  type: TEXT

        # Test Data Sets
        - createTable:
            tableName: ao_4d28dd_test_dataset
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: test_case_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: dataset_name
                  type: VARCHAR(255)
              - column:
                  name: dataset_values
                  type: TEXT

        # Test Environments
        - createTable:
            tableName: ao_4d28dd_environment
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: environment_name
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: project_id
                  type: BIGINT
              - column:
                  name: description
                  type: TEXT
              - column:
                  name: configuration
                  type: TEXT

        # Test Automation
        - createTable:
            tableName: ao_4d28dd_automation
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: test_case_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: automation_key
                  type: VARCHAR(255)
              - column:
                  name: framework
                  type: VARCHAR(100)
              - column:
                  name: script_path
                  type: VARCHAR(1000)
              - column:
                  name: automated
                  type: BOOLEAN
                  defaultValueBoolean: false

        # Test Automation Results
        - createTable:
            tableName: ao_4d28dd_automation_result
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: automation_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: execution_id
                  type: BIGINT
              - column:
                  name: run_date
                  type: TIMESTAMP
              - column:
                  name: status
                  type: VARCHAR(50)
              - column:
                  name: duration_ms
                  type: BIGINT
              - column:
                  name: log_output
                  type: TEXT
              - column:
                  name: error_message
                  type: TEXT

        # Test Reports
        - createTable:
            tableName: ao_4d28dd_test_report
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: report_name
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: report_type
                  type: VARCHAR(100)
              - column:
                  name: project_id
                  type: BIGINT
              - column:
                  name: cycle_id
                  type: BIGINT
              - column:
                  name: generated_by
                  type: VARCHAR(255)
              - column:
                  name: generated_date
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
              - column:
                  name: report_data
                  type: TEXT

        # Test Labels
        - createTable:
            tableName: ao_4d28dd_test_label
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: test_case_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: label_name
                  type: VARCHAR(255)
                  constraints:
                    nullable: false

        # Test Custom Fields
        - createTable:
            tableName: ao_4d28dd_test_custom_field
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: field_name
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: field_type
                  type: VARCHAR(100)
              - column:
                  name: project_id
                  type: BIGINT
              - column:
                  name: entity_type
                  type: VARCHAR(100)
              - column:
                  name: field_config
                  type: TEXT

        # Test Custom Field Values
        - createTable:
            tableName: ao_4d28dd_custom_field_value
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: field_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: entity_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: field_value
                  type: TEXT

        # Test Suite
        - createTable:
            tableName: ao_4d28dd_test_suite
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: suite_name
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: project_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: description
                  type: TEXT
              - column:
                  name: created_by
                  type: VARCHAR(255)
              - column:
                  name: created_date
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP

        # Test Suite Cases
        - createTable:
            tableName: ao_4d28dd_suite_case
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: suite_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: test_case_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: order_num
                  type: INTEGER

        # Test Preconditions
        - createTable:
            tableName: ao_4d28dd_precondition
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: precondition_key
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: project_id
                  type: BIGINT
              - column:
                  name: name
                  type: VARCHAR(500)
              - column:
                  name: description
                  type: TEXT
              - column:
                  name: type
                  type: VARCHAR(100)

        # Test Case Preconditions
        - createTable:
            tableName: ao_4d28dd_case_precondition
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: test_case_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: precondition_id
                  type: BIGINT
                  constraints:
                    nullable: false

        # Test Repositories
        - createTable:
            tableName: ao_4d28dd_repository
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: repository_name
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: project_id
                  type: BIGINT
              - column:
                  name: repository_type
                  type: VARCHAR(100)
              - column:
                  name: connection_url
                  type: VARCHAR(1000)
              - column:
                  name: credentials
                  type: TEXT

        # Test Import History
        - createTable:
            tableName: ao_4d28dd_import_history
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: project_id
                  type: BIGINT
              - column:
                  name: import_date
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
              - column:
                  name: imported_by
                  type: VARCHAR(255)
              - column:
                  name: source_type
                  type: VARCHAR(100)
              - column:
                  name: items_imported
                  type: INTEGER
              - column:
                  name: status
                  type: VARCHAR(50)
              - column:
                  name: error_log
                  type: TEXT

        # Test Templates
        - createTable:
            tableName: ao_4d28dd_test_template
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: template_name
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: template_type
                  type: VARCHAR(100)
              - column:
                  name: project_id
                  type: BIGINT
              - column:
                  name: template_content
                  type: TEXT
              - column:
                  name: is_global
                  type: BOOLEAN
                  defaultValueBoolean: false

        # Test Permissions
        - createTable:
            tableName: ao_4d28dd_test_permission
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: entity_type
                  type: VARCHAR(100)
              - column:
                  name: entity_id
                  type: BIGINT
              - column:
                  name: user_key
                  type: VARCHAR(255)
              - column:
                  name: group_name
                  type: VARCHAR(255)
              - column:
                  name: permission_type
                  type: VARCHAR(100)

        # Test Configuration
        - createTable:
            tableName: ao_4d28dd_test_config
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: project_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: config_key
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: config_value
                  type: TEXT

        # Test Execution History
        - createTable:
            tableName: ao_4d28dd_execution_history
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: test_case_id
                  type: BIGINT
                  constraints:
                    nullable: false
              - column:
                  name: execution_date
                  type: TIMESTAMP
              - column:
                  name: executed_by
                  type: VARCHAR(255)
              - column:
                  name: status
                  type: VARCHAR(50)
              - column:
                  name: cycle_id
                  type: BIGINT
              - column:
                  name: execution_time
                  type: INTEGER

        # Test Audit
        - createTable:
            tableName: ao_4d28dd_test_audit
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: entity_type
                  type: VARCHAR(100)
              - column:
                  name: entity_id
                  type: BIGINT
              - column:
                  name: action_type
                  type: VARCHAR(100)
              - column:
                  name: user_key
                  type: VARCHAR(255)
              - column:
                  name: action_date
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
              - column:
                  name: old_value
                  type: TEXT
              - column:
                  name: new_value
                  type: TEXT

        # Test Activity
        - createTable:
            tableName: ao_4d28dd_test_activity
            columns:
              - column:
                  name: id
                  type: BIGSERIAL
                  constraints:
                    primaryKey: true
              - column:
                  name: project_id
                  type: BIGINT
              - column:
                  name: user_key
                  type: VARCHAR(255)
              - column:
                  name: activity_type
                  type: VARCHAR(100)
              - column:
                  name: activity_date
                  type: TIMESTAMP
                  defaultValueComputed: CURRENT_TIMESTAMP
              - column:
                  name: entity_type
                  type: VARCHAR(100)
              - column:
                  name: entity_id
                  type: BIGINT
              - column:
                  name: description
                  type: TEXT
